<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskFlow Pro - Enterprise Task Management System</title>
    
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Flatpickr -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --primary-light: #60a5fa;
            --secondary: #7c3aed;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
            --dark: #1e293b;
            --light: #f8fafc;
            --gray: #64748b;
            --gray-light: #cbd5e1;
            
            --gradient-1: linear-gradient(135deg, #2563eb, #7c3aed);
            --gradient-2: linear-gradient(135deg, #10b981, #059669);
            --gradient-3: linear-gradient(135deg, #f59e0b, #d97706);
            --gradient-4: linear-gradient(135deg, #ef4444, #dc2626);
            
            --shadow-sm: 0 4px 6px -1px rgba(0,0,0,0.1);
            --shadow: 0 10px 40px rgba(0,0,0,0.08);
            --shadow-lg: 0 20px 60px rgba(0,0,0,0.12);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .app-container {
            max-width: 1600px;
            margin: 0 auto;
        }

        /* Auth Container */
        .auth-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
        }

        .auth-card {
            background: white;
            border-radius: 30px;
            padding: 50px;
            width: 100%;
            max-width: 450px;
            box-shadow: var(--shadow-lg);
            animation: fadeIn 0.5s;
        }

        .auth-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .auth-header h2 {
            font-size: 32px;
            color: var(--dark);
            margin-bottom: 10px;
        }

        .auth-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }

        .auth-tab {
            flex: 1;
            padding: 15px;
            border: none;
            background: var(--light);
            border-radius: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .auth-tab.active {
            background: var(--gradient-1);
            color: white;
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
            animation: slideIn 0.3s;
        }

        .auth-input {
            width: 100%;
            padding: 15px 20px;
            margin-bottom: 20px;
            border: 2px solid var(--gray-light);
            border-radius: 15px;
            font-size: 16px;
            transition: all 0.3s;
        }

        .auth-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(37,99,235,0.1);
        }

        .auth-btn {
            width: 100%;
            padding: 15px;
            border: none;
            background: var(--gradient-1);
            color: white;
            font-weight: 600;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .auth-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(37,99,235,0.3);
        }

        /* Main App */
        .main-app {
            display: none;
        }

        .main-app.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        /* Header */
        .app-header {
            background: white;
            border-radius: 20px;
            padding: 20px 30px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            box-shadow: var(--shadow);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: var(--gradient-1);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }

        .logo h1 {
            font-size: 28px;
            font-weight: 700;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            background: var(--light);
            border-radius: 40px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: var(--gradient-1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .logout-btn {
            padding: 10px 20px;
            border: none;
            background: var(--danger);
            color: white;
            border-radius: 40px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .logout-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(239,68,68,0.3);
        }

        /* Level Bar */
        .level-bar {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
            box-shadow: var(--shadow);
        }

        .level-info {
            display: flex;
            align-items: center;
            gap: 30px;
        }

        .level-badge {
            width: 60px;
            height: 60px;
            background: var(--gradient-1);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 700;
            color: white;
        }

        .level-progress {
            width: 300px;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .progress-track {
            height: 10px;
            background: var(--gray-light);
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-1);
            width: 0%;
            transition: width 0.5s;
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shine 2s infinite;
        }

        .stats-row {
            display: flex;
            gap: 30px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
        }

        .stat-label {
            font-size: 12px;
            color: var(--gray);
        }

        /* Controls */
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .search-box {
            flex: 1;
            max-width: 400px;
            display: flex;
            align-items: center;
            gap: 10px;
            background: white;
            padding: 10px 20px;
            border-radius: 40px;
            box-shadow: var(--shadow);
        }

        .search-box i {
            color: var(--gray);
        }

        .search-box input {
            flex: 1;
            border: none;
            outline: none;
            font-size: 16px;
        }

        .filter-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            border: none;
            background: white;
            border-radius: 40px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: var(--shadow);
        }

        .filter-btn:hover,
        .filter-btn.active {
            background: var(--gradient-1);
            color: white;
            transform: translateY(-3px);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            display: flex;
            align-items: center;
            gap: 20px;
            box-shadow: var(--shadow);
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
        }

        .stat-icon.total { background: var(--gradient-1); }
        .stat-icon.completed { background: var(--gradient-2); }
        .stat-icon.pending { background: var(--gradient-3); }
        .stat-icon.overdue { background: var(--gradient-4); }

        .stat-details h3 {
            font-size: 32px;
            font-weight: 700;
            color: var(--dark);
        }

        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 30px;
        }

        /* Task Form */
        .task-form {
            background: white;
            border-radius: 20px;
            padding: 25px;
            height: fit-content;
            box-shadow: var(--shadow);
        }

        .form-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--dark);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--gray);
            font-size: 14px;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--gray-light);
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
        }

        .priority-group {
            display: flex;
            gap: 10px;
        }

        .priority-option {
            flex: 1;
            padding: 12px;
            text-align: center;
            border: 2px solid var(--gray-light);
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .priority-option.low.active,
        .priority-option.low:hover {
            background: var(--gradient-2);
            border-color: var(--success);
            color: white;
        }

        .priority-option.medium.active,
        .priority-option.medium:hover {
            background: var(--gradient-3);
            border-color: var(--warning);
            color: white;
        }

        .priority-option.high.active,
        .priority-option.high:hover {
            background: var(--gradient-4);
            border-color: var(--danger);
            color: white;
        }

        .btn-create {
            width: 100%;
            padding: 15px;
            border: none;
            background: var(--gradient-1);
            color: white;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-create:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(37,99,235,0.3);
        }

        /* Tasks Container */
        .tasks-container {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: var(--shadow);
        }

        .tasks-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .tasks-header h2 {
            font-size: 24px;
            color: var(--dark);
        }

        .tasks-count {
            color: var(--gray);
        }

        .tasks-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            max-height: 600px;
            overflow-y: auto;
            padding: 10px;
        }

        .task-card {
            background: var(--light);
            border-radius: 15px;
            padding: 20px;
            cursor: move;
            transition: all 0.3s;
            border-left: 6px solid transparent;
            position: relative;
            animation: slideIn 0.3s;
        }

        .task-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .task-card.dragging {
            opacity: 0.5;
            transform: scale(0.95);
        }

        .task-card.priority-low { border-left-color: var(--success); }
        .task-card.priority-medium { border-left-color: var(--warning); }
        .task-card.priority-high { border-left-color: var(--danger); }

        .task-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
        }

        .task-title {
            font-weight: 700;
            color: var(--dark);
        }

        .task-priority {
            padding: 4px 12px;
            border-radius: 30px;
            font-size: 11px;
            font-weight: 600;
        }

        .task-priority.low { background: rgba(16,185,129,0.1); color: var(--success); }
        .task-priority.medium { background: rgba(245,158,11,0.1); color: var(--warning); }
        .task-priority.high { background: rgba(239,68,68,0.1); color: var(--danger); }

        .task-description {
            color: var(--gray);
            font-size: 13px;
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .task-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 12px;
            color: var(--gray);
        }

        .meta-item i {
            color: var(--primary);
        }

        .task-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .task-exp {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 12px;
            font-weight: 600;
            color: var(--primary);
        }

        .task-actions {
            display: flex;
            gap: 8px;
        }

        .task-btn {
            width: 35px;
            height: 35px;
            border-radius: 8px;
            border: none;
            background: white;
            color: var(--gray);
            cursor: pointer;
            transition: all 0.3s;
        }

        .task-btn.complete:hover {
            background: var(--gradient-2);
            color: white;
        }

        .task-btn.delete:hover {
            background: var(--gradient-4);
            color: white;
        }

        /* Achievement Badge */
        .achievement-badge {
            position: absolute;
            top: -10px;
            right: -10px;
            width: 30px;
            height: 30px;
            background: var(--gradient-1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
            animation: pulse 2s infinite;
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 10px;
            color: white;
            z-index: 1000;
            animation: slideInRight 0.3s;
            max-width: 400px;
        }

        .notification.success { background: var(--gradient-2); }
        .notification.error { background: var(--gradient-4); }
        .notification.info { background: var(--gradient-1); }

        /* Level Up Animation */
        .level-up {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 60px;
            font-weight: 800;
            color: white;
            text-shadow: 0 0 30px var(--primary);
            z-index: 1001;
            animation: levelUp 1s;
            pointer-events: none;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        @keyframes levelUp {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 0; }
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .app-header {
                flex-direction: column;
                text-align: center;
            }
            
            .level-bar {
                flex-direction: column;
                text-align: center;
            }
            
            .level-info {
                flex-direction: column;
            }
            
            .stats-row {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .search-box {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Auth Container -->
    <div class="auth-container" id="authContainer">
        <div class="auth-card">
            <div class="auth-header">
                <h2>Welcome to TaskFlow</h2>
                <p style="color: var(--gray);">Sign in to manage your tasks</p>
            </div>
            
            <div class="auth-tabs">
                <button class="auth-tab active" onclick="switchAuthTab('login')">Login</button>
                <button class="auth-tab" onclick="switchAuthTab('register')">Register</button>
            </div>
            
            <!-- Login Form -->
            <div class="auth-form active" id="loginForm">
                <form onsubmit="handleLogin(event)">
                    <input type="email" class="auth-input" placeholder="Email" required>
                    <input type="password" class="auth-input" placeholder="Password" required>
                    <button type="submit" class="auth-btn">Login</button>
                </form>
            </div>
            
            <!-- Register Form -->
            <div class="auth-form" id="registerForm">
                <form onsubmit="handleRegister(event)">
                    <input type="text" class="auth-input" placeholder="Full Name" required>
                    <input type="email" class="auth-input" placeholder="Email" required>
                    <input type="password" class="auth-input" placeholder="Password" required>
                    <button type="submit" class="auth-btn">Register</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div class="main-app" id="mainApp">
        <div class="app-container">
            <!-- Header -->
            <div class="app-header">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-tasks"></i>
                    </div>
                    <h1>TaskFlow Pro</h1>
                </div>
                
                <div class="user-menu">
                    <div class="user-info">
                        <div class="user-avatar" id="userAvatar">JD</div>
                        <div>
                            <div style="font-weight: 600;" id="userName">John Doe</div>
                            <div style="font-size: 12px; color: var(--gray);" id="userEmail">john@example.com</div>
                        </div>
                    </div>
                    <button class="logout-btn" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
            
            <!-- Level Bar -->
            <div class="level-bar">
                <div class="level-info">
                    <div class="level-badge" id="levelNumber">1</div>
                    <div>
                        <div style="font-weight: 700; font-size: 18px;" id="levelName">Task Novice</div>
                        <div style="font-size: 14px; color: var(--gray);" id="levelProgress">0/100 XP to Level 2</div>
                    </div>
                    <div class="level-progress">
                        <div class="progress-header">
                            <span>Level Progress</span>
                            <span id="levelPercentage">0%</span>
                        </div>
                        <div class="progress-track">
                            <div class="progress-fill" id="levelFill" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
                
                <div class="stats-row">
                    <div class="stat-item">
                        <div class="stat-value" id="totalTasksStat">150</div>
                        <div class="stat-label">Total Tasks</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="completedTasksStat">45</div>
                        <div class="stat-label">Completed</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="xpStat">450</div>
                        <div class="stat-label">Total XP</div>
                    </div>
                </div>
            </div>
            
            <!-- Stats Grid -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon total">
                        <i class="fas fa-tasks"></i>
                    </div>
                    <div class="stat-details">
                        <h3 id="totalTasks">150</h3>
                        <p style="color: var(--gray);">Total Tasks</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon completed">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stat-details">
                        <h3 id="completedTasks">45</h3>
                        <p style="color: var(--gray);">Completed</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon pending">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-details">
                        <h3 id="pendingTasks">95</h3>
                        <p style="color: var(--gray);">In Progress</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon overdue">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="stat-details">
                        <h3 id="overdueTasks">10</h3>
                        <p style="color: var(--gray);">Overdue</p>
                    </div>
                </div>
            </div>
            
            <!-- Controls -->
            <div class="controls">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search tasks..." id="searchInput" oninput="taskManager.searchTasks(this.value)">
                </div>
                
                <div class="filter-group">
                    <button class="filter-btn active" data-filter="all" onclick="taskManager.filterTasks('all')">All</button>
                    <button class="filter-btn" data-filter="low" onclick="taskManager.filterTasks('low')">Low</button>
                    <button class="filter-btn" data-filter="medium" onclick="taskManager.filterTasks('medium')">Medium</button>
                    <button class="filter-btn" data-filter="high" onclick="taskManager.filterTasks('high')">High</button>
                    <button class="filter-btn" data-filter="completed" onclick="taskManager.filterTasks('completed')">Completed</button>
                </div>
            </div>
            
            <!-- Main Content -->
            <div class="main-content">
                <!-- Task Form -->
                <div class="task-form">
                    <div class="form-title">
                        <i class="fas fa-plus-circle" style="color: var(--primary);"></i>
                        Create New Task
                    </div>
                    
                    <form id="taskForm" onsubmit="taskManager.createTask(event)">
                        <div class="form-group">
                            <label>Task Title</label>
                            <input type="text" class="form-control" id="taskTitle" placeholder="Enter task title..." required>
                        </div>
                        
                        <div class="form-group">
                            <label>Description</label>
                            <textarea class="form-control" id="taskDesc" rows="3" placeholder="Enter task description..."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>Priority</label>
                            <div class="priority-group" id="priorityGroup">
                                <div class="priority-option low" data-priority="low">Low</div>
                                <div class="priority-option medium active" data-priority="medium">Medium</div>
                                <div class="priority-option high" data-priority="high">High</div>
                            </div>
                            <input type="hidden" id="taskPriority" value="medium">
                        </div>
                        
                        <div class="form-group">
                            <label>Category</label>
                            <select class="form-control" id="taskCategory">
                                <option value="Work">Work</option>
                                <option value="Personal">Personal</option>
                                <option value="Shopping">Shopping</option>
                                <option value="Health">Health</option>
                                <option value="Education">Education</option>
                                <option value="Finance">Finance</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Deadline</label>
                            <input type="text" class="form-control" id="taskDeadline" placeholder="Select date and time...">
                        </div>
                        
                        <button type="submit" class="btn-create">
                            <i class="fas fa-microchip"></i>
                            Create Task
                        </button>
                    </form>
                </div>
                
                <!-- Tasks Container -->
                <div class="tasks-container">
                    <div class="tasks-header">
                        <h2>Your Tasks</h2>
                        <span class="tasks-count" id="tasksCount">150 tasks</span>
                    </div>
                    
                    <div class="tasks-grid" id="tasksGrid"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script>
        // User authentication state
        let currentUser = null;
        
        // Switch between login and register tabs
        function switchAuthTab(tab) {
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            
            if (tab === 'login') {
                document.querySelectorAll('.auth-tab')[0].classList.add('active');
                document.getElementById('loginForm').classList.add('active');
            } else {
                document.querySelectorAll('.auth-tab')[1].classList.add('active');
                document.getElementById('registerForm').classList.add('active');
            }
        }
        
        // Handle login
        function handleLogin(event) {
            event.preventDefault();
            const email = event.target[0].value;
            const password = event.target[1].value;
            
            // Simulate login validation
            if (email && password) {
                currentUser = {
                    name: email.split('@')[0],
                    email: email,
                    avatar: email.charAt(0).toUpperCase() + email.charAt(1).toUpperCase()
                };
                
                document.getElementById('userName').textContent = currentUser.name;
                document.getElementById('userEmail').textContent = currentUser.email;
                document.getElementById('userAvatar').textContent = currentUser.avatar;
                
                document.getElementById('authContainer').style.display = 'none';
                document.getElementById('mainApp').classList.add('active');
                
                showNotification('Login successful! Welcome back!', 'success');
            }
        }
        
        // Handle register
        function handleRegister(event) {
            event.preventDefault();
            const name = event.target[0].value;
            const email = event.target[1].value;
            const password = event.target[2].value;
            
            if (name && email && password) {
                currentUser = {
                    name: name,
                    email: email,
                    avatar: name.split(' ').map(n => n[0]).join('').toUpperCase()
                };
                
                document.getElementById('userName').textContent = currentUser.name;
                document.getElementById('userEmail').textContent = currentUser.email;
                document.getElementById('userAvatar').textContent = currentUser.avatar;
                
                document.getElementById('authContainer').style.display = 'none';
                document.getElementById('mainApp').classList.add('active');
                
                showNotification('Registration successful! Welcome!', 'success');
            }
        }
        
        // Logout
        function logout() {
            currentUser = null;
            document.getElementById('mainApp').classList.remove('active');
            document.getElementById('authContainer').style.display = 'flex';
            showNotification('Logged out successfully', 'info');
        }
        
        // Task Manager Class
        class TaskManager {
            constructor() {
                this.tasks = [];
                this.completedTasks = [];
                this.currentFilter = 'all';
                this.searchTerm = '';
                
                // Level System
                this.userLevel = {
                    current: 1,
                    xp: 0,
                    nextLevelXP: 100,
                    totalTasks: 0,
                    completedCount: 0,
                    rank: 'Task Novice'
                };
                
                // Ranks
                this.ranks = [
                    { level: 1, name: 'Task Novice', xp: 0 },
                    { level: 2, name: 'Task Apprentice', xp: 100 },
                    { level: 3, name: 'Task Adept', xp: 250 },
                    { level: 4, name: 'Task Expert', xp: 500 },
                    { level: 5, name: 'Task Master', xp: 1000 },
                    { level: 6, name: 'Task Guru', xp: 2000 },
                    { level: 7, name: 'Task Sage', xp: 3500 },
                    { level: 8, name: 'Task Legend', xp: 5500 },
                    { level: 9, name: 'Task Mythic', xp: 8000 },
                    { level: 10, name: 'Task God', xp: 12000 }
                ];
                
                this.init();
            }
            
            init() {
                this.generateTasks(150); // Generate 150+ tasks
                this.setupEventListeners();
                this.setupDatePicker();
                this.renderTasks();
                this.updateStats();
                this.updateLevel();
            }
            
            generateTasks(count) {
                const categories = ['Work', 'Personal', 'Shopping', 'Health', 'Education', 'Finance'];
                const priorities = ['low', 'medium', 'high'];
                
                const taskTemplates = [
                    'Complete {project} documentation',
                    'Review {team} pull requests',
                    'Prepare presentation for {topic}',
                    'Research {technology} best practices',
                    'Implement {feature} feature',
                    'Fix {bug} in production',
                    'Update {dependency} version',
                    'Deploy {service} to server',
                    'Test {component} integration',
                    'Optimize {query} performance',
                    'Design {interface} mockups',
                    'Write {document} specifications',
                    'Attend {meeting} with team',
                    'Schedule {appointment} with client',
                    'Review {budget} for Q{quarter}',
                    'Update {profile} information',
                    'Backup {database} data',
                    'Monitor {system} metrics',
                    'Configure {tool} settings',
                    'Install {software} updates',
                    'Train {model} with new data',
                    'Analyze {report} results',
                    'Create {diagram} for architecture',
                    'Refactor {code} for better performance',
                    'Debug {issue} in application',
                    'Release {version} to users',
                    'Plan {sprint} activities',
                    'Estimate {project} timeline',
                    'Coordinate with {department} team',
                    'Prepare {documentation} for release'
                ];
                
                const projects = ['API', 'Frontend', 'Backend', 'Database', 'Mobile App', 'Website', 'Dashboard'];
                const teams = ['development', 'design', 'marketing', 'sales', 'support'];
                const topics = ['AI', 'Machine Learning', 'Cloud Computing', 'Security', 'Performance'];
                const technologies = ['React', 'Node.js', 'Python', 'Java', 'Docker', 'Kubernetes'];
                const features = ['authentication', 'payment', 'notification', 'search', 'reporting'];
                const bugs = ['memory leak', 'crash', 'performance', 'security', 'UI'];
                const dependencies = ['npm', 'pip', 'maven', 'gradle', 'composer'];
                const services = ['API', 'microservice', 'database', 'cache', 'queue'];
                const components = ['UI', 'API', 'database', 'auth', 'logging'];
                const queries = ['database', 'search', 'report', 'analytics', 'monitoring'];
                const interfaces = ['user', 'admin', 'API', 'dashboard', 'mobile'];
                const documents = ['requirements', 'design', 'technical', 'user manual', 'API'];
                const meetings = ['standup', 'planning', 'review', 'retrospective', 'client'];
                const appointments = ['doctor', 'dentist', 'consultant', 'lawyer', 'accountant'];
                const budgets = ['monthly', 'quarterly', 'annual', 'project', 'department'];
                const profiles = ['LinkedIn', 'GitHub', 'portfolio', 'resume', 'social media'];
                const databases = ['production', 'staging', 'development', 'backup', 'test'];
                const systems = ['server', 'network', 'application', 'database', 'security'];
                const tools = ['IDE', 'CI/CD', 'monitoring', 'logging', 'testing'];
                const software = ['OS', 'editor', 'browser', 'plugin', 'extension'];
                const models = ['ML', 'AI', 'statistical', 'predictive', 'analytics'];
                const reports = ['sales', 'performance', 'security', 'audit', 'compliance'];
                const diagrams = ['UML', 'flowchart', 'architecture', 'network', 'database'];
                const code = ['module', 'class', 'function', 'component', 'service'];
                const issues = ['critical', 'major', 'minor', 'trivial', 'enhancement'];
                const versions = ['1.0', '2.0', '3.0', 'beta', 'release candidate'];
                const sprints = ['current', 'next', 'backlog', 'review', 'planning'];
                const departments = ['engineering', 'product', 'design', 'QA', 'DevOps'];
                const documentations = ['API', 'user guide', 'installation', 'configuration', 'troubleshooting'];
                
                for (let i = 0; i < count; i++) {
                    const template = taskTemplates[Math.floor(Math.random() * taskTemplates.length)];
                    const title = template
                        .replace('{project}', projects[Math.floor(Math.random() * projects.length)])
                        .replace('{team}', teams[Math.floor(Math.random() * teams.length)])
                        .replace('{topic}', topics[Math.floor(Math.random() * topics.length)])
                        .replace('{technology}', technologies[Math.floor(Math.random() * technologies.length)])
                        .replace('{feature}', features[Math.floor(Math.random() * features.length)])
                        .replace('{bug}', bugs[Math.floor(Math.random() * bugs.length)])
                        .replace('{dependency}', dependencies[Math.floor(Math.random() * dependencies.length)])
                        .replace('{service}', services[Math.floor(Math.random() * services.length)])
                        .replace('{component}', components[Math.floor(Math.random() * components.length)])
                        .replace('{query}', queries[Math.floor(Math.random() * queries.length)])
                        .replace('{interface}', interfaces[Math.floor(Math.random() * interfaces.length)])
                        .replace('{document}', documents[Math.floor(Math.random() * documents.length)])
                        .replace('{meeting}', meetings[Math.floor(Math.random() * meetings.length)])
                        .replace('{appointment}', appointments[Math.floor(Math.random() * appointments.length)])
                        .replace('{budget}', budgets[Math.floor(Math.random() * budgets.length)])
                        .replace('{quarter}', Math.floor(Math.random() * 4 + 1))
                        .replace('{profile}', profiles[Math.floor(Math.random() * profiles.length)])
                        .replace('{database}', databases[Math.floor(Math.random() * databases.length)])
                        .replace('{system}', systems[Math.floor(Math.random() * systems.length)])
                        .replace('{tool}', tools[Math.floor(Math.random() * tools.length)])
                        .replace('{software}', software[Math.floor(Math.random() * software.length)])
                        .replace('{model}', models[Math.floor(Math.random() * models.length)])
                        .replace('{report}', reports[Math.floor(Math.random() * reports.length)])
                        .replace('{diagram}', diagrams[Math.floor(Math.random() * diagrams.length)])
                        .replace('{code}', code[Math.floor(Math.random() * code.length)])
                        .replace('{issue}', issues[Math.floor(Math.random() * issues.length)])
                        .replace('{version}', versions[Math.floor(Math.random() * versions.length)])
                        .replace('{sprint}', sprints[Math.floor(Math.random() * sprints.length)])
                        .replace('{department}', departments[Math.floor(Math.random() * departments.length)])
                        .replace('{documentation}', documentations[Math.floor(Math.random() * documentations.length)]);
                    
                    const priority = priorities[Math.floor(Math.random() * priorities.length)];
                    const category = categories[Math.floor(Math.random() * categories.length)];
                    
                    // Generate random deadline within next 14 days
                    const deadline = new Date();
                    deadline.setDate(deadline.getDate() + Math.floor(Math.random() * 14));
                    deadline.setHours(Math.floor(Math.random() * 24), Math.floor(Math.random() * 60));
                    
                    // 30% chance of being completed
                    const isCompleted = Math.random() < 0.3;
                    
                    const task = {
                        id: `task-${i}-${Date.now()}-${Math.random().toString(36).substr(2, 6)}`,
                        title: title,
                        description: `Priority: ${priority}. Category: ${category}. Complete by ${deadline.toLocaleDateString()}.`,
                        priority: priority,
                        deadline: deadline.toISOString(),
                        category: category,
                        completed: isCompleted,
                        createdAt: new Date(Date.now() - Math.random() * 30 * 24 * 60 * 60 * 1000).toISOString(),
                        xpValue: this.getXPValue(priority),
                        order: i
                    };
                    
                    if (isCompleted) {
                        this.completedTasks.push(task);
                        this.userLevel.completedCount++;
                        this.userLevel.xp += task.xpValue;
                    } else {
                        this.tasks.push(task);
                    }
                }
                
                // Sort tasks by order
                this.tasks.sort((a, b) => a.order - b.order);
                this.updateLevel();
            }
            
            getXPValue(priority) {
                return { low: 10, medium: 20, high: 30 }[priority] || 10;
            }
            
            setupEventListeners() {
                // Priority selector
                document.querySelectorAll('.priority-option').forEach(opt => {
                    opt.addEventListener('click', () => {
                        document.querySelectorAll('.priority-option').forEach(o => o.classList.remove('active'));
                        opt.classList.add('active');
                        document.getElementById('taskPriority').value = opt.dataset.priority;
                    });
                });
                
                // Drag and drop
                this.setupDragAndDrop();
            }
            
            setupDatePicker() {
                flatpickr("#taskDeadline", {
                    enableTime: true,
                    dateFormat: "Y-m-d H:i",
                    minDate: "today",
                    defaultDate: new Date().fp_incr(1)
                });
            }
            
            setupDragAndDrop() {
                const container = document.getElementById('tasksGrid');
                let draggedItem = null;
                
                container.addEventListener('dragstart', (e) => {
                    if (e.target.classList.contains('task-card')) {
                        draggedItem = e.target;
                        e.target.classList.add('dragging');
                        e.dataTransfer.setData('text/plain', e.target.dataset.id);
                    }
                });
                
                container.addEventListener('dragend', (e) => {
                    if (e.target.classList.contains('task-card')) {
                        e.target.classList.remove('dragging');
                    }
                    document.querySelectorAll('.task-card').forEach(c => c.classList.remove('drag-over'));
                });
                
                container.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    const card = e.target.closest('.task-card');
                    if (card) {
                        card.classList.add('drag-over');
                    }
                });
                
                container.addEventListener('dragleave', (e) => {
                    const card = e.target.closest('.task-card');
                    if (card) {
                        card.classList.remove('drag-over');
                    }
                });
                
                container.addEventListener('drop', (e) => {
                    e.preventDefault();
                    const card = e.target.closest('.task-card');
                    if (!card) return;
                    
                    card.classList.remove('drag-over');
                    
                    const draggedId = e.dataTransfer.getData('text/plain');
                    const targetId = card.dataset.id;
                    
                    if (draggedId && targetId && draggedId !== targetId) {
                        this.reorderTasks(draggedId, targetId);
                    }
                });
            }
            
            reorderTasks(draggedId, targetId) {
                const draggedIndex = this.tasks.findIndex(t => t.id === draggedId);
                const targetIndex = this.tasks.findIndex(t => t.id === targetId);
                
                if (draggedIndex !== -1 && targetIndex !== -1) {
                    const [dragged] = this.tasks.splice(draggedIndex, 1);
                    this.tasks.splice(targetIndex, 0, dragged);
                    
                    // Update order property
                    this.tasks.forEach((task, index) => {
                        task.order = index;
                    });
                    
                    this.renderTasks();
                    showNotification('Tasks reordered', 'info');
                }
            }
            
            createTask(event) {
                event.preventDefault();
                
                const title = document.getElementById('taskTitle').value;
                const description = document.getElementById('taskDesc').value;
                const priority = document.getElementById('taskPriority').value;
                const category = document.getElementById('taskCategory').value;
                const deadline = document.getElementById('taskDeadline').value;
                
                if (!title || !deadline) {
                    showNotification('Please fill all required fields', 'error');
                    return;
                }
                
                const task = {
                    id: `task-${Date.now()}-${Math.random().toString(36).substr(2, 6)}`,
                    title: title,
                    description: description || 'No description',
                    priority: priority,
                    deadline: deadline,
                    category: category,
                    completed: false,
                    createdAt: new Date().toISOString(),
                    xpValue: this.getXPValue(priority),
                    order: this.tasks.length
                };
                
                this.tasks.unshift(task);
                this.renderTasks();
                this.updateStats();
                this.showTaskNotification('Task created successfully!', 'success');
                
                // Clear form
                document.getElementById('taskForm').reset();
                document.getElementById('taskPriority').value = 'medium';
                document.querySelector('.priority-option.medium').classList.add('active');
            }
            
            completeTask(taskId) {
                const taskIndex = this.tasks.findIndex(t => t.id === taskId);
                if (taskIndex !== -1) {
                    const task = this.tasks[taskIndex];
                    task.completed = true;
                    
                    // Add XP
                    this.userLevel.xp += task.xpValue;
                    this.userLevel.completedCount++;
                    
                    // Move to completed tasks
                    this.tasks.splice(taskIndex, 1);
                    this.completedTasks.unshift(task);
                    
                    // Check for level up
                    this.checkLevelUp();
                    
                    this.renderTasks();
                    this.updateStats();
                    this.updateLevel();
                    this.showTaskNotification(`+${task.xpValue} XP earned!`, 'success');
                    this.createParticles();
                }
            }
            
            deleteTask(taskId) {
                if (confirm('Are you sure you want to delete this task?')) {
                    this.tasks = this.tasks.filter(t => t.id !== taskId);
                    this.completedTasks = this.completedTasks.filter(t => t.id !== taskId);
                    this.renderTasks();
                    this.updateStats();
                    this.showTaskNotification('Task deleted', 'info');
                }
            }
            
            checkLevelUp() {
                while (this.userLevel.xp >= this.userLevel.nextLevelXP) {
                    this.userLevel.current++;
                    this.userLevel.xp -= this.userLevel.nextLevelXP;
                    this.userLevel.nextLevelXP = Math.floor(this.userLevel.nextLevelXP * 1.5);
                    this.userLevel.rank = this.getRank(this.userLevel.current);
                    
                    // Show level up animation
                    this.showLevelUp();
                }
            }
            
            getRank(level) {
                const rank = this.ranks.find(r => r.level === level);
                return rank ? rank.name : 'Task Legend';
            }
            
            showLevelUp() {
                const levelUpDiv = document.createElement('div');
                levelUpDiv.className = 'level-up';
                levelUpDiv.textContent = `LEVEL ${this.userLevel.current}!`;
                document.body.appendChild(levelUpDiv);
                
                setTimeout(() => {
                    levelUpDiv.remove();
                }, 1000);
                
                showNotification(` LEVEL UP! You are now Level ${this.userLevel.current}`, 'success');
            }
            
            createParticles() {
                for (let i = 0; i < 20; i++) {
                    const particle = document.createElement('div');
                    particle.style.cssText = `
                        position: fixed;
                        left: 50%;
                        top: 50%;
                        width: ${Math.random() * 10 + 5}px;
                        height: ${Math.random() * 10 + 5}px;
                        background: linear-gradient(135deg, #2563eb, #7c3aed);
                        border-radius: 50%;
                        pointer-events: none;
                        z-index: 1000;
                        animation: particleFly 1s ease-out forwards;
                    `;
                    
                    const angle = Math.random() * Math.PI * 2;
                    const distance = Math.random() * 150 + 50;
                    particle.style.setProperty('--tx', `${Math.cos(angle) * distance}px`);
                    particle.style.setProperty('--ty', `${Math.sin(angle) * distance}px`);
                    
                    document.body.appendChild(particle);
                    
                    setTimeout(() => particle.remove(), 1000);
                }
            }
            
            filterTasks(filter) {
                this.currentFilter = filter;
                
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.classList.remove('active');
                    if (btn.dataset.filter === filter) {
                        btn.classList.add('active');
                    }
                });
                
                this.renderTasks();
            }
            
            searchTasks(term) {
                this.searchTerm = term.toLowerCase();
                this.renderTasks();
            }
            
            getFilteredTasks() {
                let tasks = this.currentFilter === 'completed' ? this.completedTasks : this.tasks;
                
                if (this.currentFilter !== 'all' && this.currentFilter !== 'completed') {
                    tasks = tasks.filter(t => t.priority === this.currentFilter);
                }
                
                if (this.searchTerm) {
                    tasks = tasks.filter(t => 
                        t.title.toLowerCase().includes(this.searchTerm) ||
                        t.description.toLowerCase().includes(this.searchTerm) ||
                        t.category.toLowerCase().includes(this.searchTerm)
                    );
                }
                
                return tasks;
            }
            
            renderTasks() {
                const container = document.getElementById('tasksGrid');
                const tasks = this.getFilteredTasks();
                
                document.getElementById('tasksCount').textContent = `${tasks.length} tasks`;
                
                if (tasks.length === 0) {
                    container.innerHTML = `
                        <div style="grid-column: 1/-1; text-align: center; padding: 60px;">
                            <i class="fas fa-clipboard-list" style="font-size: 60px; color: var(--gray); opacity: 0.5;"></i>
                            <h3 style="margin-top: 20px; color: var(--gray);">No tasks found</h3>
                            <p style="color: var(--gray-light);">Create a new task to get started</p>
                        </div>
                    `;
                    return;
                }
                
                container.innerHTML = tasks.map(task => this.renderTaskCard(task)).join('');
                this.setupDragAndDrop();
            }
            
            renderTaskCard(task) {
                const deadline = new Date(task.deadline);
                const now = new Date();
                const isOverdue = deadline < now && !task.completed;
                const timeLeft = this.getTimeLeft(deadline);
                
                return `
                    <div class="task-card priority-${task.priority}" draggable="true" data-id="${task.id}">
                        <div class="task-header">
                            <span class="task-title">${task.title}</span>
                            <span class="task-priority ${task.priority}">
                                ${task.priority.charAt(0).toUpperCase() + task.priority.slice(1)}
                            </span>
                        </div>
                        <div class="task-description">${task.description}</div>
                        <div class="task-meta">
                            <span class="meta-item" title="Deadline">
                                <i class="fas fa-calendar"></i>
                                ${deadline.toLocaleDateString()} ${deadline.toLocaleTimeString()}
                            </span>
                            <span class="meta-item" title="Category">
                                <i class="fas fa-tag"></i>
                                ${task.category}
                            </span>
                            <span class="meta-item" title="Time Left">
                                <i class="fas fa-hourglass-half"></i>
                                ${timeLeft}
                            </span>
                        </div>
                        <div class="task-footer">
                            <span class="task-exp">
                                <i class="fas fa-star"></i>
                                +${task.xpValue} XP
                            </span>
                            <div class="task-actions">
                                ${!task.completed ? `
                                    <button class="task-btn complete" onclick="taskManager.completeTask('${task.id}')" title="Complete Task">
                                        <i class="fas fa-check"></i>
                                    </button>
                                ` : ''}
                                <button class="task-btn delete" onclick="taskManager.deleteTask('${task.id}')" title="Delete Task">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        ${isOverdue ? '<div class="achievement-badge"><i class="fas fa-exclamation"></i></div>' : ''}
                    </div>
                `;
            }
            
            getTimeLeft(deadline) {
                const now = new Date();
                const diff = deadline - now;
                
                if (diff < 0) return 'Overdue';
                
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                
                if (days > 0) return `${days}d ${hours}h left`;
                if (hours > 0) return `${hours}h left`;
                return 'Due soon';
            }
            
            updateStats() {
                const total = this.tasks.length + this.completedTasks.length;
                const completed = this.completedTasks.length;
                const pending = this.tasks.length;
                const overdue = this.tasks.filter(t => new Date(t.deadline) < new Date()).length;
                
                document.getElementById('totalTasks').textContent = total;
                document.getElementById('completedTasks').textContent = completed;
                document.getElementById('pendingTasks').textContent = pending;
                document.getElementById('overdueTasks').textContent = overdue;
                
                document.getElementById('totalTasksStat').textContent = total;
                document.getElementById('completedTasksStat').textContent = completed;
                document.getElementById('xpStat').textContent = this.userLevel.xp;
            }
            
            updateLevel() {
                document.getElementById('levelNumber').textContent = this.userLevel.current;
                document.getElementById('levelName').textContent = this.userLevel.rank;
                
                const progress = (this.userLevel.xp / this.userLevel.nextLevelXP) * 100;
                document.getElementById('levelFill').style.width = progress + '%';
                document.getElementById('levelPercentage').textContent = Math.round(progress) + '%';
                document.getElementById('levelProgress').textContent = `${this.userLevel.xp}/${this.userLevel.nextLevelXP} XP to Level ${this.userLevel.current + 1}`;
            }
            
            showTaskNotification(message, type) {
                showNotification(message, type);
            }
        }
        
        // Notification function
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
        
        // Add particle animation style
        const style = document.createElement('style');
        style.textContent = `
            @keyframes particleFly {
                0% {
                    transform: translate(-50%, -50%) scale(1);
                    opacity: 1;
                }
                100% {
                    transform: translate(calc(-50% + var(--tx)), calc(-50% + var(--ty))) scale(0);
                    opacity: 0;
                }
            }
            
            .drag-over {
                transform: scale(1.02);
                box-shadow: 0 0 0 3px var(--primary);
            }
        `;
        document.head.appendChild(style);
        
        // Initialize task manager
        const taskManager = new TaskManager();
        
        // Make task manager globally accessible
        window.taskManager = taskManager;
    </script>
</body>
</html>
